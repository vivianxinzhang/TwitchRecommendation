(this["webpackJsonptwitch-recommend-ui"]=this["webpackJsonptwitch-recommend-ui"]||[]).push([[0],{174:function(e,t,n){},309:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n(0),c=n.n(a),s=n(26),o=n.n(s),i=(n(174),n(50)),l=n(53),d=n(52),u=n(311),j=n(168),h=n(81),m=n(48),f=n(66),b=n(316),p=n(314),g=n(313),O=n(315),x=n(319),y=n(320),S="",v="".concat(S,"/login"),C=function(e){return fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){if(200!==e.status)throw Error("Fail to log in");return e.json()}))},I="".concat(S,"/register"),w=function(e){return fetch(I,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(200!==e.status)throw Error("Fail to register")}))},F="".concat(S,"/logout"),M=function(){return fetch(F,{method:"POST",credentials:"include"}).then((function(e){if(200!==e.status)throw Error("Fail to log out")}))},P="".concat(S,"/game"),E=function(){return fetch(P).then((function(e){if(200!==e.status)throw Error("Fail to get top games");return e.json()}))},T="".concat(S,"/game?game_name="),k="".concat(S,"/search?game_id="),_=function(e){return fetch("".concat(k).concat(e)).then((function(e){if(200!==e.status)throw Error("Fail to find the game");return e.json()}))},L=function(e){return function(e){return fetch("".concat(T).concat(e)).then((function(e){if(200!==e.status)throw Error("Fail to find the game");return e.json()}))}(e).then((function(e){if(e&&e.id)return _(e.id);throw Error("Fail to find the game")}))},R="".concat(S,"/favorite"),D=function(){return fetch(R,{credentials:"include"}).then((function(e){if(200!==e.status)throw Error("Fail to get favorite item");return e.json()}))},A="".concat(S,"/recommendation"),V=function(){return fetch(A,{credentials:"include"}).then((function(e){if(200!==e.status)throw Error("Fail to get recommended item");return e.json()}))},G=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={displayModal:!1},e.handleCancel=function(){e.setState({displayModal:!1})},e.signinOnClick=function(){e.setState({displayModal:!0})},e.onFinish=function(t){C(t).then((function(t){console.log(t),e.setState({displayModal:!1}),j.b.success("Welcome back, ".concat(t.userId)),e.props.onSuccess()})).catch((function(e){j.b.error(e.message)}))},e.render=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(f.a,{shape:"round",onClick:e.signinOnClick,style:{marginRight:"20px"},children:"Login"}),Object(r.jsx)(p.a,{title:"Log in",visible:e.state.displayModal,onCancel:e.handleCancel,footer:null,destroyOnClose:!0,children:Object(r.jsxs)(g.a,{name:"normal_login",onFinish:e.onFinish,preserve:!1,children:[Object(r.jsx)(g.a.Item,{name:"user_id",rules:[{required:!0,message:"Please input your Username!"}],children:Object(r.jsx)(O.a,{prefix:Object(r.jsx)(x.a,{}),placeholder:"Username"})}),Object(r.jsx)(g.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(r.jsx)(O.a,{prefix:Object(r.jsx)(y.a,{}),placeholder:"Password"})}),Object(r.jsx)(g.a.Item,{children:Object(r.jsx)(f.a,{type:"primary",htmlType:"submit",children:"Login"})})]})})]})},e}return n}(c.a.Component),q=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={displayModal:!1},e.handleCancel=function(){e.setState({displayModal:!1})},e.signupOnClick=function(){e.setState({displayModal:!0})},e.onFinish=function(t){w(t).then((function(){e.setState({displayModal:!1}),j.b.success("Successfully signed up")})).catch((function(e){j.b.error(e.message)}))},e.render=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(f.a,{shape:"round",type:"primary",onClick:e.signupOnClick,children:"Register"}),Object(r.jsx)(p.a,{title:"Register",visible:e.state.displayModal,onCancel:e.handleCancel,footer:null,destroyOnClose:!0,children:Object(r.jsxs)(g.a,{name:"normal_register",initialValues:{remember:!0},onFinish:e.onFinish,preserve:!1,children:[Object(r.jsx)(g.a.Item,{name:"user_id",rules:[{required:!0,message:"Please input your Username!"}],children:Object(r.jsx)(O.a,{prefix:Object(r.jsx)(x.a,{}),placeholder:"Username"})}),Object(r.jsx)(g.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(r.jsx)(O.a,{prefix:Object(r.jsx)(y.a,{}),placeholder:"Password"})}),Object(r.jsx)(g.a.Item,{name:"first_name",rules:[{required:!0,message:"Please input your Firstname!"}],children:Object(r.jsx)(O.a,{placeholder:"firstname"})}),Object(r.jsx)(g.a.Item,{name:"last_name",rules:[{required:!0,message:"Please input your Lastname!"}],children:Object(r.jsx)(O.a,{placeholder:"lastname"})}),Object(r.jsx)(g.a.Item,{children:Object(r.jsx)(f.a,{type:"primary",htmlType:"submit",children:"Register"})})]})})]})},e}return n}(c.a.Component),J=n(317),N=n(321),U=n(322),B=b.a.SubMenu,H={Streams:"streams",Videos:"videos",Clips:"clips"},W=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={displayDrawer:!1,data:{VIDEO:[],STREAM:[],CLIP:[]}},e.onDrawerClose=function(){e.setState({displayDrawer:!1})},e.onFavoriteClick=function(){D().then((function(t){console.log(t),e.setState({data:t,displayDrawer:!0})})).catch((function(e){j.b.error(e.message)}))},e.render=function(){var t=e.props.data,n=t.VIDEO,a=t.STREAM,c=t.CLIP;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(f.a,{type:"primary",shape:"round",icon:Object(r.jsx)(N.a,{}),onClick:e.onFavoriteClick,children:"My Favorite"}),Object(r.jsx)(J.a,{title:"My Favorite",placement:"right",width:720,visible:e.state.displayDrawer,onClose:e.onDrawerClose,children:Object(r.jsxs)(b.a,{mode:"inline",style:{height:"100%"},children:[Object(r.jsx)(B,{title:"Stream",icon:Object(r.jsx)(U.a,{}),style:{marginTop:"20px"},children:a.map((function(e){return Object(r.jsx)(b.a.Item,{children:Object(r.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:"".concat(e.broadcaster_name," - ").concat(e.title)})},e.id)}))},H.Streams),Object(r.jsx)(B,{title:"Video",icon:Object(r.jsx)(U.a,{}),style:{marginTop:"20px"},children:n.map((function(e){return Object(r.jsx)(b.a.Item,{children:Object(r.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:"".concat(e.broadcaster_name," - ").concat(e.title)})},e.id)}))},H.Videos),Object(r.jsx)(B,{title:"Clip",icon:Object(r.jsx)(U.a,{}),style:{marginTop:"20px"},children:c.map((function(e){return Object(r.jsx)(b.a.Item,{children:Object(r.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:"".concat(e.broadcaster_name," - ").concat(e.title)})},e.id)}))},H.CLIP)]})})]})},e}return n}(c.a.Component),z=n(325),K=n(326),Q=n(323),X=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={displayModal:!1},e.handleCancel=function(){e.setState({displayModal:!1})},e.displayModal=function(){e.setState({displayModal:!0})},e.onSubmit=function(t){L(t.game_name).then((function(t){console.log(t),console.log(e.props),e.setState({displayModal:!1}),e.props.onSuccess(t)})).catch((function(e){j.b.error(e.message)}))},e.render=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(f.a,{shape:"round",onClick:e.displayModal,icon:Object(r.jsx)(Q.a,{}),style:{marginLeft:"20px",marginTop:"20px"},children:"Search Game"}),Object(r.jsx)(p.a,{title:"Search Game",visible:e.state.displayModal,onCancel:e.handleCancel,footer:null,children:Object(r.jsxs)(g.a,{name:"custom_search",onFinish:e.onSubmit,children:[Object(r.jsx)(g.a.Item,{name:"game_name",rules:[{required:!0,message:"Please enter a game name"}],children:Object(r.jsx)(O.a,{placeholder:"Game name"})}),Object(r.jsx)(g.a.Item,{children:Object(r.jsx)(f.a,{type:"primary",htmlType:"submit",children:"Search"})})]})})]})},e}return n}(c.a.Component),Y=n(129),Z=n(116),$=n(312),ee=n(318),te=n(324),ne=Y.a.TabPane,re="stream",ae="videos",ce="clips",se=function(e,t,n,a){var c="".concat(e.broadcaster_name,": ").concat(e.title),s=n.find((function(t){return t.id===e.id}));return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(h.a,{justify:"space-between",children:[Object(r.jsx)(m.a,{children:t&&Object(r.jsx)(Z.a,{title:s?"Remove from favorite list":"Add to favorite list",children:Object(r.jsx)(f.a,{shape:"circle",icon:s?Object(r.jsx)(N.a,{}):Object(r.jsx)(te.a,{}),onClick:function(){var t;s?(t=e,fetch(R,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({favorite:t})}).then((function(e){if(200!==e.status)throw Error("Fail to delete favorite item")}))).then((function(){a()})).catch((function(e){j.b.error(e.message)})):function(e){return fetch(R,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({favorite:e})}).then((function(e){if(200!==e.status)throw Error("Fail to add favorite item")}))}(e).then((function(){a()})).catch((function(e){j.b.error(e.message)}))}})})}),Object(r.jsx)(m.a,{style:{overflow:"hidden",textOverflow:"ellipsis",width:450,marginLeft:"10px"},children:Object(r.jsx)(Z.a,{title:c,children:Object(r.jsx)("span",{children:c})})})]})})},oe=function(e,t,n,a){return Object(r.jsx)($.b,{grid:{xs:1,sm:2,md:4,lg:4,xl:6},dataSource:e,renderItem:function(e){return Object(r.jsx)($.b.Item,{style:{marginRight:"20px"},children:Object(r.jsx)(ee.a,{title:se(e,t,n,a),children:Object(r.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:Object(r.jsx)("img",{alt:"Placeholder",src:(c=e.thumbnail_url,c.replace("%{height}","252").replace("%{width}","480").replace("{height}","252").replace("{width}","480"))})})})});var c}})},ie=function(e){var t=e.resources,n=e.loggedIn,a=e.favoriteItems,c=e.favoriteOnChange,s=t.VIDEO,o=t.STREAM,i=t.CLIP,l=a.VIDEO,d=a.STREAM,u=a.CLIP;return Object(r.jsxs)(Y.a,{children:[Object(r.jsx)(ne,{tab:"Streams",forceRender:!0,children:oe(o,n,d,c)},re),Object(r.jsx)(ne,{tab:"Videos",forceRender:!0,children:oe(s,n,l,c)},ae),Object(r.jsx)(ne,{tab:"Clip",forceRender:!0,children:oe(i,n,u,c)},ce)]})},le=n(162),de=n.n(le),ue=u.a.Header,je=u.a.Content,he=u.a.Sider,me=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={loggedIn:!1,topGames:[],resources:{VIDEO:[],STREAM:[],CLIP:[]},favoriteItems:{VIDEO:[],STREAM:[],CLIP:[]}},e.favoriteOnChange=function(){D().then((function(t){e.setState({favoriteItems:t,loggedIn:!0})})).catch((function(e){j.b.error(e.message)}))},e.onGameSelect=function(t){var n=t.key;console.log(n),"Recommendation"!==n?_(n).then((function(t){console.log(t),e.setState({resources:t})})):V().then((function(t){console.log(t),e.setState({resources:t})}))},e.customSearchOnSuccess=function(t){console.log(e.state.resources),console.log(t),e.setState({resources:t}),console.log(e.state.resources)},e.signinOnSuccess=function(){D().then((function(t){console.log(t),e.setState({favoriteItems:t,loggedIn:!0}),console.log(e.favoriteItems)})).catch((function(e){j.b.error(e.message)}))},e.signoutOnClick=function(){M().then((function(){e.setState({loggedIn:!1}),j.b.success("Successfull signed out")})).catch((function(e){j.b.error(e.message)}))},e.componentDidMount=function(){E().then((function(t){console.log("componentDidMount -> ",t),e.setState({topGames:t})})).catch((function(e){j.b.error(e.message)}))},e.render=function(){return Object(r.jsxs)(u.a,{children:[Object(r.jsx)(ue,{children:Object(r.jsxs)(h.a,{justify:"space-between",children:[Object(r.jsxs)(m.a,{children:["// user logged in: favorite",e.state.loggedIn&&Object(r.jsx)(W,{data:e.state.favoriteItems})]}),Object(r.jsx)(m.a,{children:e.state.loggedIn?Object(r.jsx)(f.a,{shape:"round",onClick:e.signoutOnClick,children:" Logout "}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(G,{onSuccess:e.signinOnSuccess}),Object(r.jsx)(q,{})]})})]})}),Object(r.jsxs)(u.a,{children:[Object(r.jsxs)(he,{width:300,className:"site-layout-background",children:[Object(r.jsx)(X,{onSuccess:e.customSearchOnSuccess}),Object(r.jsxs)(b.a,{mode:"inline",onSelect:e.onGameSelect,style:{marginTop:"10px"},children:[Object(r.jsx)(b.a.Item,{icon:Object(r.jsx)(z.a,{}),children:"Recommend for you!"},"Recommendataion"),Object(r.jsx)(de.a,{icon:Object(r.jsx)(K.a,{}),title:"Popular Games",children:e.state.topGames.map((function(e){return Object(r.jsxs)(b.a.Item,{children:[Object(r.jsx)("img",{alt:"Placeholder",src:e.box_art_url.replace("{height}","40").replace("{width}","40")}),Object(r.jsx)("span",{style:{marginLeft:"10px"},children:e.name})]},e.id)}))},"Popular Games")]})]}),Object(r.jsx)(u.a,{style:{padding:"24px"},children:Object(r.jsx)(je,{className:"site-layout-background",style:{padding:24,margin:0,height:800,overflow:"auto"},children:Object(r.jsx)(ie,{resources:e.state.resources,loggedIn:e.state.loggedIn,favoriteItems:e.state.favoriteItems,favoriteOnChange:e.favoriteOnChange})})})]})]})},e}return n}(c.a.Component),fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,327)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(me,{})}),document.getElementById("root")),fe()}},[[309,1,2]]]);
//# sourceMappingURL=main.9edde6f0.chunk.js.map